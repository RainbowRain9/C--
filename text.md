让我详细分析这个示例的执行过程。

## 示例分析：[2,1,5,6,2,3]

### 一、寻找左边界

```thinking
让我一步步分析左边界的查找过程：
1. 使用单调递增栈
2. 栈中存储下标
3. 对每个位置，找到左侧第一个高度小于它的位置
4. 如果栈为空，说明左侧没有更小的，记为-1
```

| 位置 | 当前高度 | 栈的变化 | left[i] | 说明 |
|-----|---------|----------|---------|------|
| 0   | 2       | [] → [0] | -1      | 栈空，左边界为-1 |
| 1   | 1       | [0] → [1] | -1      | 1小于2，栈清空，左边界为-1 |
| 2   | 5       | [1] → [1,2] | 1      | 5大于1，1为左边界 |
| 3   | 6       | [1,2] → [1,2,3] | 2      | 6大于5，2为左边界 |
| 4   | 2       | [1,2,3] → [1,4] | 1      | 2小于5和6，弹出直到1 |
| 5   | 3       | [1,4] → [1,4,5] | 4      | 3大于2，4为左边界 |

### 二、寻找右边界

```thinking
现在从右向左遍历：
1. 重新使用空栈
2. 寻找右侧第一个高度小于当前位置的元素
3. 如果栈为空，说明右侧没有更小的，记为n(6)
```

| 位置 | 当前高度 | 栈的变化 | right[i] | 说明 |
|-----|---------|----------|----------|------|
| 5   | 3       | [] → [5] | 6        | 栈空，右边界为6 |
| 4   | 2       | [5] → [4] | 5        | 2小于3，5为右边界 |
| 3   | 6       | [4] → [4] | 4        | 6大于2，4为右边界 |
| 2   | 5       | [4] → [4] | 4        | 5大于2，4为右边界 |
| 1   | 1       | [4] → [1] | 6        | 1最小，右边界为6 |
| 0   | 2       | [1] → [1] | 1        | 2大于1，1为右边界 |

### 三、计算面积

```thinking
对每个位置：
1. 计算宽度 = right[i] - left[i] - 1
2. 面积 = 高度 × 宽度
3. 更新最大面积
```

| 位置 | 高度 | 左边界 | 右边界 | 宽度 | 面积 | 说明 |
|-----|------|-------|--------|------|------|------|
| 0   | 2    | -1    | 1      | 1    | 2    | 2×(1-(-1)-1)=2 |
| 1   | 1    | -1    | 6      | 6    | 6    | 1×(6-(-1)-1)=6 |
| 2   | 5    | 1     | 4      | 2    | 10   | 5×(4-1-1)=10 |
| 3   | 6    | 2     | 4      | 1    | 6    | 6×(4-2-1)=6 |
| 4   | 2    | 1     | 5      | 3    | 6    | 2×(5-1-1)=6 |
| 5   | 3    | 4     | 6      | 1    | 3    | 3×(6-4-1)=3 |

### 四、图形解释

```
高度: [2,1,5,6,2,3]

      
     6
      █
      █
    5 █
    █ █
    █ █
2   █ █   3
█   █ █   █
█ 1 █ █ 2 █
█ █ █ █ █ █
0 1 2 3 4 5
```

最大矩形面积分析：
1. 位置2（高度5）：
   - 左边界：位置1
   - 右边界：位置4
   - 宽度：2
   - 面积：5 × 2 = 10

### 五、关键观察

1. **单调栈的作用**：
   - 维护了一个高度递增的序列
   - 遇到较小值时，可以确定栈顶元素的边界

2. **边界处理**：
   - 左边界不存在时记为-1
   - 右边界不存在时记为n(6)

3. **最大面积的形成**：
   - 最大面积10出现在高度5的位置
   - 通过向两边扩展直到遇到小于5的高度

4. **特殊情况处理**：
   - 高度1是全局最小值，可以扩展到整个数组
   - 连续递增的高度（如5,6）会在遇到较小值时确定边界

这个例子很好地展示了单调栈在解决"寻找下一个更小元素"类问题时的优势，以及如何通过分别处理左右边界来简化问题的求解。